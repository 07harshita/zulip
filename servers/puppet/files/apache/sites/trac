<VirtualHost *:80>
    ServerName trac.humbughq.com
    Redirect permanent / https://trac.humbughq.com/
</VirtualHost>

<VirtualHost *:443>
    ServerName trac.humbughq.com

    SSLEngine on
    SSLCertificateFile /etc/apache2/certs/humbug-self-signed.crt
    SSLCertificateKeyFile /etc/apache2/certs/humbug-self-signed.key

    Header add Strict-Transport-Security "max-age=15768000"
    Header add X-Frame-Options DENY

    Alias /chrome/common /home/humbug/trac/htdocs/common
    Alias /chrome/site /home/humbug/trac/htdocs/site

    <Directory "/home/humbug/trac/htdocs">
        Order allow,deny
        Allow from all
    </Directory>

    WSGIScriptAlias / /home/humbug/trac/cgi-bin/trac.wsgi

    <Directory /home/humbug/trac>
        WSGIApplicationGroup %{GLOBAL}
        Order deny,allow
        Allow from all
    </Directory>

    <Location "/">
       AuthType Digest
       AuthName "wiki"
       AuthDigestProvider file
       AuthUserFile /etc/apache2/users/wiki
       Require valid-user
    </Location>

    ErrorLog /var/log/apache2/error.log
    LogLevel warn

    CustomLog /var/log/apache2/access.log combined
    ServerSignature On
</VirtualHost>
