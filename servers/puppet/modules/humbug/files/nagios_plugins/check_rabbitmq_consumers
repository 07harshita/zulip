#!/usr/bin/env python

"""
Nagios plugin to check that the rabbitmq has the correct number of consumers

This script just checks the contents of /var/run/nagios/check-rabbitmq-consumers,
which is generated by bots/check-rabbitmq-consumers.

It is run by cron and can be found at bots/rabbitmq-numconsumers-crontab
"""

import sys

sys.path.append('/home/humbug/humbug/')
from bots.cron_file_helper import nagios_from_file

RESULTS_FILE = "/var/run/nagios/check-rabbitmq-consumers"

ret, result = nagios_from_file(RESULTS_FILE)

print result
exit(ret)
