{{! Client-side Mustache template for rendering zephyrs.}}
{{#each zephyrs}}
{{#with this}}
{{#include_bookend}}
<tr><td /><td /><td class="bookend{{^is_class}} personal-message{{/is_class}}" /></tr>
{{/include_bookend}}

{{#include_recipient}}
{{#if is_class}}
<tr>
    <td colspan="2"
        class="zephyr_label_clickable zephyr_newstyle_class"
        onclick="select_zephyr_by_id({{id}}); narrow_class();">{{display_recipient}}</td>
    <td class="zephyr_label_clickable zephyr_newstyle_instance"
        onclick="select_zephyr_by_id({{id}}); narrow_instance();">{{instance}}</td>
</tr>
{{else}}
<tr>
    <td colspan="3" class="zephyr_label_clickable zephyr_newstyle_pm"
        onclick="select_zephyr_by_id({{id}}); narrow_by_recipient();">Huddle with {{display_reply_to}}</td>
</tr>
{{/if}}
{{/include_recipient}}
<tr zid="{{id}}" id="{{dom_id}}"
    class="zephyr_row{{^is_class}} personal-message{{/is_class}}"
    onclick="select_zephyr_by_id({{id}});">
    <td class="zephyr_picture">
    {{#include_sender}}
        <img class="img-rounded profile_picture"
             src="https://secure.gravatar.com/avatar/{{gravatar_hash}}?d=identicon&s=30"/>
    {{/include_sender}}
    </td>
    <td class="pointer"><p></p></td>
    <td class="messagebox{{^include_sender}} prev_is_same_sender{{/include_sender}}{{^is_class}} personal-message{{/is_class}}"
        onclick="select_zephyr_by_id({{id}}); respond_to_zephyr();">
        {{#include_sender}}
        <span class="zephyr_label_clickable zephyr_sender"
              onmouseover="show_email({{id}});"
              onmouseout="hide_email();">
            <span class="zephyr_sender_name">{{sender_name}}</span>
            <span class="zephyr_sender_email invisible">{{sender_email}}</span>
        </span>
    {{/include_sender}}
        <span class="zephyr_time" title="{{full_date_str}}">{{timestr}}</span>
        <div class="zephyr_content">{{{content}}}</div>
    </td>
</tr>
{{/with}}
{{/each}}
