{{! Client-side Mustache template for rendering subscriptions.}}
{{#each subscriptions}}
{{#with this}}
<tr class="subscription_row" id="subscription_{{id}}">
  <td>
    <div class="subscription_table_elem subscription_header" data-toggle="collapse" data-target="#subscription_settings_{{id}}">
      <span class="color_swatch {{^subscribed}}invisible{{/subscribed}}" style="background-color: {{color}}"></span>
      <span class="subscription_name">{{name}}</span>
      <button class="btn sub_unsub_button {{^subscribed}}btn-primary{{/subscribed}}"
              type="button" name="subscription">
        {{#subscribed}}
        Unsubscribe
        {{/subscribed}}
        {{^subscribed}}
        Subscribe
        {{/subscribed}}
      </button>
    </div>

    <div id="subscription_settings_{{id}}" class="collapse subscription_settings">
      <div class="regular_subscription_settings {{^subscribed}}hide{{/subscribed}}">
        <span class="sub_settings_title">Settings</span>
        <ul>
          <li><span class="sub_setting_control"><input class="colorpicker" type="text" value="{{color}}" /></span>
            Stream color
        </ul>
      </div>
      {{#render_subscribers}}
      <div class="subscriber_list_settings">
        <span class="sub_settings_title">Members</span>
        <div class="subscriber_list_add">
          <form class="form-inline">
            <input type="text" name="principal" placeholder="Email address" value="" class="span2" />
            <input type="submit" name="add_subscriber" value="Add" class="btn btn-primary" />
          </form>
        </div>
      </div>
      <div class="subscriber_list_container">
        <div class="subscriber_list_loading_indicator"></div>
        <div class="alert alert-error hide"></div>
        <div class="alert alert-warning hide"></div>
        <ul>
        </ul>
      </div>
      {{/render_subscribers}}
    </div>
  </td>
</tr>
{{/with}}
{{/each}}
