#!/bin/bash -e

target='zephyr'

case "$1" in
    zephyr*)
      target="$1"
      shift
      ;;
esac

cd "$(dirname "$0")"/..
./zephyr/tests/generate-fixtures
# "-u" uses unbuffered IO, which is important when wrapping it in
# something like subprocess (as tools/review does)
/usr/bin/env python -u ./manage.py test "$target" --settings=humbug.test_settings "$@"
