{% extends "zephyr/base.html" %}

{# User Activity. #}

{% block content %}

{% for name, activity in data.iteritems %}

    <h2>{{ name }} usage</h2>
    <table class="table sortable table-striped table-bordered">
    <thead class="activity_head">
    <tr>
    <th>User</th>
    <th>Last get_updates</th>
    <th>Last send_message</th>
    {% if activity.has_pointer %}
    <th>Last update_pointer</th>
    <th>Number of pointer updates</th>
    {% endif %}
    <th>Number of messages sent</th>
    </tr>
    </thead>
    <tbody>
    {% for email, row in activity.sorted_rows %}
        <tr class="{{ row.class }}">
        <td><strong>{{ email }}</strong></td>
        <td sorttable_customkey="{{ row.get_updates_last|date:'YmdHi' }}">{{ row.get_updates_last }}</td>
        <td sorttable_customkey="{{ row.send_message_last|date:'YmdHi' }}">{{ row.send_message_last }}</td>
        {% if activity.has_pointer %}
        <td sorttable_customkey="{{ row.update_pointer_last|date:'YmdHi' }}">{{ row.update_pointer_last }}</td>
        <td>{{ row.update_pointer_count }}</td>
        {% endif %}
        <td>{{ row.send_message_count }}</td>
        </tr>
    {% endfor %}
    </tbody>
    </table>

{% endfor %}

<script type="text/javascript" src="/static/third/sorttable/sorttable.js"></script>
<link href='{{ static_hidden }}styles/activity.css?dummy_time={% now "U" %}' rel='stylesheet'>

{% endblock %}
